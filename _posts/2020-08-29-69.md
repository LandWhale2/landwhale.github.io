---
title: "동기화 객체 종류 및 뮤텍스, 세마포어"
date : 2020-08-29 13:19:30 -0400
categories: OS
---

# 동기화 객체 종류


## 스레드 동기화 방법

1. 실행순서의 동기화

- 스레드의 실행순서를 정의하고, 이 순서에 반드시 따르도록 하는 것

2. 메모리 접근에 대한 동기화

- 메모리 접근에 있어서 동시접근을 막는 것

- 실행의 순서가 중요한 상황이 아니고, 한 순간에 하나의 스레드만 접근하면 되는 상황을 의미


## 동기화 기법 종류

1. 유저 모드 동기화

- 커널 코드가 실행되지 않는 동기화 기법

- 성능상 이점이 있으나 기능상의 제한이 있음

- Ex) 크리티컬 섹션 기반의 동기화, 인터락 함수 기반의 동기화

2. 커널 모드 동기화

- 커널에서 제공하는 동기화 기능을 활용하는 방법

- 커널 모드로의 변경이 필요하고 이는 성능 저하로 이어짐, 대신 다양한 기능 활용 가능

- Ex) 뮤텍스 기반의 동기화, 세마포어 기반의 동기화, 이름있는 뮤텍스 기반의 프로세스 동기화, 이벤트 기반의 동기화



# 뮤텍스와 세마포어의 차이

## 뮤텍스(Mutex)

- 공유된 자원의 데이터를 여러 **스레드**가 접근하는 것을 막는 것

- 상호배제라고도 하며, Critical Section을 가진 스레드의 Running time이 서로 겹치지 않도록 각각 단독으로 실행하게 하는 기술이다.

- 다중 프로세스들의 공유 리소스에 대한 접근을 조율하기 위해 synchronized 또는 lock을 사용한다.

- 뮤텍스 객체를 두 스레드가 동시에 사용 할 수 없음

## 세마포어(Semaphore)

- 공유된 자원의 데이터를 여러 **프로세스**가 접근하는 것을 막는 것

- 리소스 상태를 나타내는 간단한 카운터로 생각할 수 있다.

- 일반적으로 비교적 긴 시간을 확보하는 리소스에 대해 이용한다.

- 공유 리소스에 접근할 수 있는 프로세스의 최대 허용치만큼 동시에 사용자가 접근하여 사용할 수 있다.

- 각 프로세스는 세마포어 값은 확인하고 변경할 수 있다.
   * 사용 중이지 않는 자원의 경우 그 프로세스가 즉시 자원을 사용할 수 있다.
   * 이미 다른 프로세스에 의해 사용 중이라는 사실을 알게 되면 재시도하기 전에 일정 시간을 기다려야 한다.

- 세마포어는 이진수 (0 또는 1)를 사용하거나, 또는 추가적인 값을 가질 수도 있다.


## 차이

- 가장 큰 차이점은 관리하는 동기화 대상의 개수

- Semaphore는 Mutex가 될 수 있지만 Mutex는 Semaphore가 될 수 없다.

- Semaphore는 소유할 수 없는 반면, Mutex는 소유가 가능하며 소유주가 이에 대한 책임을 가진다.

- Mutex의 경우 Mutex를 소유하고 있는 스레드가 이 Mutex를 해제할 수 있다. 하지만 Semaphore의 경우 이러한 Semaphore를 소유하지 않는 스레드가 Semaphore를 해제할 수 있다.

- Semaphore는 시스템 범위에 걸쳐있고 파일시스템상의 파일 형태로 존재하는 반면 Mutex는 프로세스 범위를 가지며 프로세스가 종료될 때 자동으로 Clean up 된다.



> 출처 : https://github.com/WeareSoft/tech-interview/blob/master/contents/os.md#%EB%A9%80%ED%8B%B0-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8C%80%EC%8B%A0-%EB%A9%80%ED%8B%B0-%EC%8A%A4%EB%A0%88%EB%93%9C%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0



